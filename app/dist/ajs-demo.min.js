/*! ajs-demo 2015-05-08 */
"use strict";angular.module("demoApp",["ngRoute","demoControllers","demoDirectives","ngCookies"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"demo/home.html",controller:"HomeCtrl"}).when("/DeviceList",{templateUrl:"demo/device-list.html",controller:"DeviceList"}).otherwise({redirectTo:"/home"})}]);var demoControllers=angular.module("demoControllers",[]);demoControllers.controller("HomeCtrl",["$scope","$cookies","$cookieStore","$http","$rootScope",function(a,b,c,d,e){e.coxUrl="http://192.168.1.36:8080",a.userinfo=e.userinfo,a.token=b.token||c.get("token"),a.token&&d.jsonp(e.coxUrl+"/SSOServer/server/setCookie?callback=JSON_CALLBACK&token="+a.token).success(function(b){a.setScript(b.url)}).error(function(a){}),a.setScript=function(a){for(var b=document.createDocumentFragment(),c=document.getElementsByTagName("head")[0],d=0;d<a.length;d++){var e=document.createElement("script");e.type="text/javascript",e.src=a[d],b.appendChild(e)}c.appendChild(b)},a.setCookie=function(){var a={};a.userNickName="towersxu",c.put("userinfo",a)}}]),demoControllers.controller("DeviceList",["$scope","$http","$cookies","$rootScope",function(a,b,c,d){var e;a.token=c.token,a.userinfo=d.userinfo,a.davices=[],a.token&&(e=d.coxUrl+"/SSOServer/server/getBrowser?callback=JSON_CALLBACK&uid="+a.userinfo.userId,b.jsonp(e).success(function(b){for(var c=/(Linux|window).+(Trident|Chrome|firefox|Safari).+###(.+)/,d=0;d<b.length;d++){var e=b[d].davice.exec(c);console.log(e),console.log(b[d].davice)}a.davices=b||{}}).error(function(a){})),a.forceLogout=function(c,e){var f=c.source.split("^!@#$&")[0],g=f+"/makeCommunicate?callback=JSON_CALLBACK?url="+f;a.davices.splice(e,1),f&&b.jsonp(g).success(function(e){g=d.coxUrl+"/SSOServer/server/otherlogout?callback=JSON_CALLBACK&browser="+c.device+"&token="+e.token,b.jsonp(g).success(function(b){a.davices=b}).error(function(a){})}).error(function(a){})}}]);var demoDirectives=angular.module("demoDirectives",[]);demoDirectives.directive("header",function(){return{restrict:"E",templateUrl:"demo/header.html"}}),demoDirectives.controller("NavDirectiveCtrl",["$rootScope","$scope","$cookieStore","$cookies",function(a,b,c,d){var e=c.get("userinfo")||d.userinfo||"{}";"object"==typeof e?a.userinfo=e:a.userinfo=JSON.parse(e),a.userinfo?(b.isHidden=!1,b.name=a.userinfo):b.isHidden=!0}]);