/*! ajs-demo 2015-06-18 */
"use strict";angular.module("demoApp",["ngRoute","demoControllers","demoDirectives","ngCookies"]).config(["$routeProvider",function(a){a.when("/login",{templateUrl:"demo/login.html",controller:"LoginCtrl"}).when("/register",{templateUrl:"demo/register.html",controller:"RegisterCtrl"}).otherwise({redirectTo:"/login"})}]);var demoControllers=angular.module("demoControllers",[]);demoControllers.controller("LoginCtrl",["$scope","$http","$cookieStore","$cookies","$location",function(a,b,c,d,e){a.tipInfoObject={N:"",UE:"帐号或者密码不正确！",VE:"验证码错误！",NE:"网络出错！"},a.tipInfo=a.tipInfoObject[d.errorType],a.domain=e.search().origUrl||e.host(),a.clearTipInfo=function(){a.tipInfo=""},a.userinfo=c.get("uli")||{},a.isSavePw=!!a.userinfo.password,a.loginHandle=function(){var b={};return b.username=a.userinfo.username,a.isSavePw&&(b.password=a.userinfo.password),c.put("uli",b),c.put("userinfo",b),!1}}]),demoControllers.controller("RegisterCtrl",["$scope","$http",function(a,b){a.isEmailVailed=!0,a.isPasswordVailed=!0,a.isPassword1Vailed=!0,a.isInValid=!0,a.blurEmail=function(){a.email?b.post("/SSOServer/server/validateemail",{userEmail:a.email}).success(function(b,c,d,e){b&&"pass"==b.status?(a.registerForm.$invalid=!1,a.isEmailVailed=!0,a.emailErrorResult=""):(a.registerForm.$invalid=!0,a.isEmailVailed=!1,a.emailErrorResult="(exist)")}).error(function(b,c,d,e){a.registerForm.$invalid=!0,a.isEmailVailed=!1,a.emailErrorResult="(server error)"}):(a.isEmailVailed=!1,a.registerForm.$invalid=!0,a.emailErrorResult="(empty)")},a.keyupPassword=function(){a.password&&a.password.length>6&&a.password.length<32?(a.passwordErrorInfo="",a.isPasswordVailed=!0,a.registerForm.$invalid=!1):(a.registerForm.$invalid=!0,a.isPasswordVailed=!1,a.passwordErrorInfo="(password length should between 6-32)")},a.keyupPassword1=function(){a.password&&a.password1==a.password?(a.isPassword1Vailed=!0,a.password1ErrorInfo="",a.registerForm.$invalid=!1):(a.isPassword1Vailed=!1,a.password1ErrorInfo="(retype password not equal password)",a.registerForm.$invalid=!0)},a.registerHandle=function(){a.isEmailVailed&&a.isPasswordVailed&&a.isPassword1Vailed?a.isInValid=!1:a.isInValid=!0}}]);var demoDirectives=angular.module("demoDirectives",[]);demoDirectives.directive("header",function(){return{restrict:"A",templateUrl:"demo/header.html",link:function(a,b,c){console.log(arguments)}}}),demoDirectives.controller("NavDirectiveCtrl",["$rootScope","$scope","$cookieStore","$cookies","$location",function(a,b,c,d,e){a.coxUrl="http://192.168.1.36:8080",b.domain=e.search().origUrl||e.host();var f=c.get("userinfo")||d.userinfo||"{}";"object"==typeof f?a.userinfo=f:a.userinfo=JSON.parse(f),b.isHidden=!0,a.userinfo&&a.userinfo.username?(b.isHidden=!1,b.name=a.userinfo):b.isHidden=!0}]);