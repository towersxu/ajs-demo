/*! ajs-demo 2015-04-30 */
"use strict";angular.module("demoApp",["ngRoute","demoControllers","ngCookies"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"demo/home.html",controller:"HomeCtrl"}).when("/login",{templateUrl:"demo/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/home"})}]);var demoControllers=angular.module("demoControllers",[]);demoControllers.controller("NavCtrl",["$scope","$cookieStore",function(a,b){a.userinfo=b.get("userinfo"),console.log(a.username)}]),demoControllers.controller("HomeCtrl",["$scope","$cookies","$cookieStore","$http",function(a,b,c,d){if(a.userinfo=c.get("userinfo"),console.log(a.userinfo),a.user=b.userinfo,console.log(a.user),a.token=c.get("token"),a.token)console.log("no token!");else{var e="/SSOServer/server/login?callback=JSON_CALLBACK&token="+a.token;d.jsonp(e).success(function(b){console.log(b),b=JSON.parse(b),a.setScript(b.url)}).error(function(b){b=b||'{"url":["http://libs.baidu.com/jquery/1.9.1/jquery.min.js","http://libs.baidu.com/jquery/1.7.2/jquery.min.js"]}',b=JSON.parse(b),a.setScript(b.url)})}a.setScript=function(a){for(var b=document.createDocumentFragment(),c=0;c<a.length;c++){var d=document.createElement("script");d.type="text/javascript",d.src=a[c],b.appendChild(d)}var e=document.getElementsByTagName("head")[0];e.appendChild(b)}}]),demoControllers.controller("LoginCtrl",["$scope","$http","$cookieStore",function(a,b,c){a.tipInfoObject={N:"",UE:"帐号或者密码不正确！",VE:"验证码错误！",NE:"网络出错！"},a.tipInfo=a.tipInfoObject[c.get("errorType")],a.clearTipInfo=function(){a.tipInfo=""},a.userinfo=c.get("userinfo")||{},a.isSavePw=!!a.userinfo.password,a.loginHandle=function(){var b={};return b.username=a.userinfo.username,a.isSavePw&&(b.password=a.userinfo.password),c.put("userinfo",b),!1},b.get("data/verify.json").success(function(b){a.location=b})}]);